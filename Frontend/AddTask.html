<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TaskFlow</title>
    <link rel="stylesheet" href="css/Style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script src="js/script.js"></script>
</head>
<body>
<!--Sidebar-->
<div class="sidebar">
    <a href="Index.html"><h2><i class="fas fa-check-circle" style="color: #3498db; margin-right: 8px;"></i> TaskFlow</h2></a>
    <div class="sidebar-links">
        <a href="Dashboard.html"><i class="fas fa-house"></i> Dashboard</a>
        <a href="AddTask.html"><i class="fas fa-plus"></i> Add Tasks</a>
        <a href="HabbitTracker.html"><i class="fas fa-table-cells"></i> Habit Tracker</a>
        <a href="Reports.html"><i class="fas fa-chart-bar"></i> Reports</a>
        <a href="Setting.html"><i class="fas fa-cog"></i> Settings</a>
    </div>
</div>
<!--Sidebar end-->
<!--Add task form-->
<div class="add-task-container">
<h2>Adaugă un Task Nou</h2>
<form id="addTask" class="add-task-form">
    <label>Nume: <input type="text" name="name" required></label><br>
    <label>Descriere: <input type="text" name="description" required></label><br>
    <label>Status: <input type="checkbox" name="status" required></label><br>
    <label>Start Time: <input type="datetime-local" name="start_time" required></label><br>
    <label>End Time: <input type="datetime-local" name="end_time" required></label><br>
    <button type="submit">Adaugă Task</button>
</form>
</div>
<p id="responseMsg"></p>

<script>
    document.getElementById('taskForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        const formData = new FormData(this);
        const taskData = {};
        formData.forEach((value, key) => taskData[key] = value);

        const response = await fetch('/tasks', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(taskData)
        });

        const result = await response.json();
        document.getElementById('responseMsg').textContent = result.message || result.error;
    });
</script>
<!--Add task end-->
<!--Right Side Bar-->
<div class="right-sidebar">
    <a href="login.html"><i class="fas fa-user-circle"></i></a>
    <a href="Setting.html"><i class="fas fa-cog"></i></a>
    <a href="#"><i class="fas fa-bell"></i></a>
    <a href="Feedback.html"><i class="fas fa-envelope"></i></a>
</div>
<!--Right Side Bar end-->
</body>
</html>